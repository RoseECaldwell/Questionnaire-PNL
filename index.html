<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MetaLove Questionnaire</title>
  
<style>
  body {
    background-color: #0d1f1f; /* sarcelle fonc√© */
    color: #f0f0f0;
    font-family: 'Poppins', sans-serif;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }
  header {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    background-color: transparent;
  }
  header h1 {
    font-size: 1.8em;
    margin-right: 15px;
  }
  header .blob {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, turquoise, pink, lightgreen);
    border-radius: 50%;
    box-shadow: 0 0 15px rgba(255,255,255,0.3);
  }
  header p {
    width: 100%;
    text-align: center;
    margin-top: 10px;
    font-size: 0.9em;
    color: #ccc;
  }
  .question {
    background: #123232;
    border-radius: 12px;
    padding: 15px;
    margin: 15px 0;
    box-shadow: 0 2px 6px rgba(0,0,0,0.5);
  }
  .options label {
    margin-right: 15px;
  }
  .options input[type="radio"] {
    margin-right: 5px;
  }

  /* Bouton suivant */
  
.next-btn {
    background: #222 !important;
    color: #fff !important;
    padding: 12px 25px;
    border: none;
    border-radius: 25px;
    font-size: 1em;
    cursor: pointer;
    margin: 20px auto !important;
    display: block !important;
    text-align: center;
    position: relative;
    overflow: hidden;
    transition: background 0.3s ease-in-out, transform 0.2s;
}
.next-btn:hover {
    background: #333 !important;
    transform: scale(1.05);
}
.next-btn::after {
    content: "";
    position: absolute;
    left: 0; right: 0; bottom: -2px; height: 3px;
    background: linear-gradient(90deg, pink, turquoise, lightgreen);
    border-radius: 2px;
}

  .next-btn:hover {
    background: #333;
    transform: scale(1.05);
  }
  .next-btn::after {
    content: "";
    position: absolute;
    left: 0; right: 0; bottom: -2px; height: 3px;
    background: linear-gradient(90deg, pink, turquoise, lightgreen);
    border-radius: 2px;
  }

  /* Barre progression toujours en bas */
  .footer-progress {
    margin-top: auto;
    width: 100%;
    padding: 10px 20px;
  }
  #progressBarContainer {
    width: 100%;
    height: 12px;
    background: #333;
    border-radius: 6px;
    overflow: hidden;
  }
  #progressBar {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, pink, yellow, lightgreen);
    transition: width 0.3s ease-in-out;
  }
</style>

  <script src="https://www.google.com/recaptcha/api.js" async defer></script>


<style>
  body {
    background-color: #0d1f1f; /* sarcelle fonc√© */
    color: #f0f0f0;
    font-family: 'Poppins', sans-serif;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }
  header {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    background-color: transparent;
  }
  header h1 {
    font-size: 1.8em;
    margin-right: 15px;
  }
  header .blob {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, turquoise, pink, lightgreen);
    border-radius: 50%;
    box-shadow: 0 0 15px rgba(255,255,255,0.3);
  }
  header p {
    width: 100%;
    text-align: center;
    margin-top: 10px;
    font-size: 0.9em;
    color: #ccc;
  }
  .question {
    background: #123232;
    border-radius: 12px;
    padding: 15px;
    margin: 15px 0;
    box-shadow: 0 2px 6px rgba(0,0,0,0.5);
  }
  .options label {
    margin-right: 15px;
  }
  .options input[type="radio"] {
    margin-right: 5px;
  }

  /* Bouton suivant */
  
.next-btn {
    background: #222 !important;
    color: #fff !important;
    padding: 12px 25px;
    border: none;
    border-radius: 25px;
    font-size: 1em;
    cursor: pointer;
    margin: 20px auto !important;
    display: block !important;
    text-align: center;
    position: relative;
    overflow: hidden;
    transition: background 0.3s ease-in-out, transform 0.2s;
}
.next-btn:hover {
    background: #333 !important;
    transform: scale(1.05);
}
.next-btn::after {
    content: "";
    position: absolute;
    left: 0; right: 0; bottom: -2px; height: 3px;
    background: linear-gradient(90deg, pink, turquoise, lightgreen);
    border-radius: 2px;
}

  .next-btn:hover {
    background: #333;
    transform: scale(1.05);
  }
  .next-btn::after {
    content: "";
    position: absolute;
    left: 0; right: 0; bottom: -2px; height: 3px;
    background: linear-gradient(90deg, pink, turquoise, lightgreen);
    border-radius: 2px;
  }

  /* Barre progression toujours en bas */
  .footer-progress {
    margin-top: auto;
    width: 100%;
    padding: 10px 20px;
  }
  #progressBarContainer {
    width: 100%;
    height: 12px;
    background: #333;
    border-radius: 6px;
    overflow: hidden;
  }
  #progressBar {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, pink, yellow, lightgreen);
    transition: width 0.3s ease-in-out;
  }
</style>




<style>
  body {
    background-color: #0d1f1f; /* sarcelle fonc√© */
    color: #f0f0f0;
    font-family: 'Poppins', sans-serif;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }
  header {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    background-color: transparent;
  }
  header h1 {
    font-size: 1.8em;
    margin-right: 15px;
  }
  header .blob {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, turquoise, pink, lightgreen);
    border-radius: 50%;
    box-shadow: 0 0 15px rgba(255,255,255,0.3);
  }
  header p {
    width: 100%;
    text-align: center;
    margin-top: 10px;
    font-size: 0.9em;
    color: #ccc;
  }
  .question {
    background: #123232;
    border-radius: 12px;
    padding: 15px;
    margin: 15px 0;
    box-shadow: 0 2px 6px rgba(0,0,0,0.5);
  }
  .options label {
    margin-right: 15px;
  }
  .options input[type="radio"] {
    margin-right: 5px;
  }

  /* Bouton suivant */
  
.next-btn {
    background: #222 !important;
    color: #fff !important;
    padding: 12px 25px;
    border: none;
    border-radius: 25px;
    font-size: 1em;
    cursor: pointer;
    margin: 20px auto !important;
    display: block !important;
    text-align: center;
    position: relative;
    overflow: hidden;
    transition: background 0.3s ease-in-out, transform 0.2s;
}
.next-btn:hover {
    background: #333 !important;
    transform: scale(1.05);
}
.next-btn::after {
    content: "";
    position: absolute;
    left: 0; right: 0; bottom: -2px; height: 3px;
    background: linear-gradient(90deg, pink, turquoise, lightgreen);
    border-radius: 2px;
}

  .next-btn:hover {
    background: #333;
    transform: scale(1.05);
  }
  .next-btn::after {
    content: "";
    position: absolute;
    left: 0; right: 0; bottom: -2px; height: 3px;
    background: linear-gradient(90deg, pink, turquoise, lightgreen);
    border-radius: 2px;
  }

  /* Barre progression toujours en bas */
  .footer-progress {
    margin-top: auto;
    width: 100%;
    padding: 10px 20px;
  }
  #progressBarContainer {
    width: 100%;
    height: 12px;
    background: #333;
    border-radius: 6px;
    overflow: hidden;
  }
  #progressBar {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, pink, yellow, lightgreen);
    transition: width 0.3s ease-in-out;
  }
</style>


</head>
<body>

<header>
  <h1>Test des m√©taprogrammes amoureux</h1>
  <div class="blob"></div>
</header>
<p style="text-align:center;">R√©pondez spontan√©ment, il n‚Äôy a pas de bonne ou mauvaise r√©ponse.</p>


<h1>Test des m√©taprogrammes ‚Äì Bonus Tome 1</h1>

<div id="quiz">
  <div id="progressBarContainer"><div id="progressBar"></div></div>
  <div id="quizBody"></div>
  <button id="btnNext">Suivant</button>
</div>

<div id="collectEmail" hidden>
  <p></p>
</div>

<script>
// -------- CONFIG --------
const SUBMIT_URL = "https://hook.eu2.make.com/nq8suncrqqr7vqvothftezfygqrufqh2";
const QUESTIONS_PER_PAGE = 5;
const ANSWER_VALUES = { "non": 0, "rarement": 25, "souvent": 75, "oui": 100 };

// -------- QUESTIONS --------
const BONUS_QUESTIONS = [
  {
    "text": "Vous souvenez-vous plus facilement des visages que des noms ?",
    "cat": "VAKOG",
    "orientation": "Visuel"
  },
  {
    "text": "Aimez-vous organiser votre espace de travail de fa√ßon esth√©tique et harmonieuse ?",
    "cat": "VAKOG",
    "orientation": "Visuel"
  },
  {
    "text": "Choisissez-vous vos v√™tements principalement en fonction de leur apparence visuelle ?",
    "cat": "VAKOG",
    "orientation": "Visuel"
  },
  {
    "text": "Lorsqu'on vous explique quelque chose, pr√©f√©rez-vous voir un sch√©ma ou un dessin √† la place ?",
    "cat": "VAKOG",
    "orientation": "Visuel"
  },
  {
    "text": "Avez-vous tendance √† visualiser mentalement vos projets ou vos id√©es ?",
    "cat": "VAKOG",
    "orientation": "Visuel"
  },
  {
    "text": "Lorsque vous entendez une voix famili√®re, la reconnaissez-vous rapidement, m√™me sans voir la personne ?",
    "cat": "VAKOG",
    "orientation": "Auditif"
  },
  {
    "text": "Entendez-vous une voix int√©rieure qui accompagne votre lecture, comme si vous vous racontiez l‚Äôhistoire √† vous-m√™me ?",
    "cat": "VAKOG",
    "orientation": "Auditif"
  },
  {
    "text": "Lorsqu‚Äôon vous donne des consignes, les retenir √† l‚Äôoral vous est-il facile ?",
    "cat": "VAKOG",
    "orientation": "Auditif"
  },
  {
    "text": "Le bruit de fond vous g√™ne-t-il facilement pour vous concentrer ?",
    "cat": "VAKOG",
    "orientation": "Auditif"
  },
  {
    "text": "Avez-vous besoin de verbaliser vos id√©es √† haute voix pour les clarifier ?",
    "cat": "VAKOG",
    "orientation": "Auditif"
  },
  {
    "text": "√ätes-vous particuli√®rement sensible √† la texture des v√™tements que vous portez ?",
    "cat": "VAKOG",
    "orientation": "Kinesth√©sique"
  },
  {
    "text": "Avez-vous du mal √† rester concentr√©(e) sans bouger, m√™me l√©g√®rement ?",
    "cat": "VAKOG",
    "orientation": "Kinesth√©sique"
  },
  {
    "text": "Apprenez-vous plus facilement en manipulant ou en exp√©rimentant directement ?",
    "cat": "VAKOG",
    "orientation": "Kinesth√©sique"
  },
  {
    "text": "Avez-vous besoin de ressentir physiquement un lieu pour savoir si vous vous y sentez bien ?",
    "cat": "VAKOG",
    "orientation": "Kinesth√©sique"
  },
  {
    "text": "√âvitez-vous certains v√™tements, m√™me beaux, s‚Äôils sont trop serr√©s ou inconfortables ?",
    "cat": "VAKOG",
    "orientation": "Kinesth√©sique"
  },
  {
    "text": "Aimez-vous avoir plusieurs mani√®res possibles d‚Äôaborder une m√™me t√¢che ?",
    "cat": "Proc√©dure / Option",
    "orientation": "Option"
  },
  {
    "text": "Pr√©f√©rez-vous improviser plut√¥t que suivre une m√©thode fixe ?",
    "cat": "Proc√©dure / Option",
    "orientation": "Option"
  },
  {
    "text": "Vous sentez-vous limit√©(e) lorsqu‚Äôon vous impose une seule fa√ßon de faire ?",
    "cat": "Proc√©dure / Option",
    "orientation": "Option"
  },
  {
    "text": "Avez-vous tendance √† adapter les r√®gles plut√¥t qu‚Äô√† les suivre strictement ?",
    "cat": "Proc√©dure / Option",
    "orientation": "Option"
  },
  {
    "text": "Appr√©ciez-vous les formations ouvertes plut√¥t que tr√®s structur√©es ?",
    "cat": "Proc√©dure / Option",
    "orientation": "Option"
  },
  {
    "text": "Avez-vous besoin de consignes claires avant de commencer une t√¢che ?",
    "cat": "Proc√©dure / Option",
    "orientation": "Proc√©dure"
  },
  {
    "text": "Pr√©f√©rez-vous suivre une m√©thode pas √† pas plut√¥t que d‚Äôimproviser ?",
    "cat": "Proc√©dure / Option",
    "orientation": "Proc√©dure"
  },
  {
    "text": "Est-ce que l‚Äôabsence de cadre vous d√©stabilise ?",
    "cat": "Proc√©dure / Option",
    "orientation": "Proc√©dure"
  },
  {
    "text": "Aimez-vous quand les choses sont bien organis√©es et logiques ?",
    "cat": "Proc√©dure / Option",
    "orientation": "Proc√©dure"
  },
  {
    "text": "Vous sentez-vous plus efficace avec un plan √©tabli √† l‚Äôavance ?",
    "cat": "Proc√©dure / Option",
    "orientation": "Proc√©dure"
  },
  {
    "text": "Prenez-vous souvent les devants pour r√©soudre un probl√®me ?",
    "cat": "Proactif / R√©actif",
    "orientation": "Proactif"
  },
  {
    "text": "Initiez-vous souvent les projets ou les discussions ?",
    "cat": "Proactif / R√©actif",
    "orientation": "Proactif"
  },
  {
    "text": "Avez-vous tendance √† agir plut√¥t qu‚Äôattendre ?",
    "cat": "Proactif / R√©actif",
    "orientation": "Proactif"
  },
  {
    "text": "√ätes-vous √† l‚Äôaise dans les situations qui demandent de la r√©activit√© ?",
    "cat": "Proactif / R√©actif",
    "orientation": "Proactif"
  },
  {
    "text": "Cherchez-vous rapidement des solutions quand un obstacle survient ?",
    "cat": "Proactif / R√©actif",
    "orientation": "Proactif"
  },
  {
    "text": "Avez-vous besoin de prendre le temps de r√©fl√©chir avant d‚Äôagir ?",
    "cat": "Proactif / R√©actif",
    "orientation": "R√©actif"
  },
  {
    "text": "Pr√©f√©rez-vous observer avant de vous lancer dans une nouvelle activit√© ?",
    "cat": "Proactif / R√©actif",
    "orientation": "R√©actif"
  },
  {
    "text": "Avez-vous tendance √† r√©agir plut√¥t qu‚Äô√† initier ?",
    "cat": "Proactif / R√©actif",
    "orientation": "R√©actif"
  },
  {
    "text": "Est-ce que vous vous sentez plus √† l‚Äôaise lorsqu‚Äôun cadre est d√©j√† pos√© ?",
    "cat": "Proactif / R√©actif",
    "orientation": "R√©actif"
  },
  {
    "text": "L‚Äôattente d‚Äôun d√©clencheur ext√©rieur vous rassure-t-elle avant de commencer ?",
    "cat": "Proactif / R√©actif",
    "orientation": "R√©actif"
  },
  {
    "text": "Souhaitez-vous influencer les d√©cisions dans un groupe ?",
    "cat": "Motivation",
    "orientation": "Pouvoir"
  },
  {
    "text": "Vous sentez-vous motiv√©(e) par le fait d‚Äô√™tre reconnu(e) comme leader ?",
    "cat": "Motivation",
    "orientation": "Pouvoir"
  },
  {
    "text": "Avez-vous besoin d‚Äôavoir le contr√¥le sur ce que vous entreprenez ?",
    "cat": "Motivation",
    "orientation": "Pouvoir"
  },
  {
    "text": "Est-ce que relever des d√©fis vous stimule ?",
    "cat": "Motivation",
    "orientation": "Pouvoir"
  },
  {
    "text": "Avez-vous tendance √† vouloir r√©aliser ce qu‚Äôon vous croit incapable de faire ?",
    "cat": "Motivation",
    "orientation": "Pouvoir"
  },
  {
    "text": "Vous fixez-vous des buts clairs avant d‚Äôagir ?",
    "cat": "Motivation",
    "orientation": "Objectif"
  },
  {
    "text": "Avez-vous besoin d‚Äôun r√©sultat concret pour vous sentir motiv√©(e) ?",
    "cat": "Motivation",
    "orientation": "Objectif"
  },
  {
    "text": "Est-ce que la performance pour vous s‚Äô√©value par l‚Äôatteinte d‚Äôun r√©sultat plut√¥t que par ce que vous avez appris ?",
    "cat": "Motivation",
    "orientation": "Objectif"
  },
  {
    "text": "Planifiez-vous vos actions avec une id√©e pr√©cise du r√©sultat attendu ?",
    "cat": "Motivation",
    "orientation": "Objectif"
  },
  {
    "text": "Vous sentez-vous plus √† l‚Äôaise quand vous savez exactement o√π vous allez ?",
    "cat": "Motivation",
    "orientation": "Objectif"
  },
  {
    "text": "Est-il important pour vous d‚Äô√™tre bien int√©gr√©(e) dans un groupe ?",
    "cat": "Motivation",
    "orientation": "Affiliation"
  },
  {
    "text": "Cherchez-vous √† cr√©er des liens avant tout dans un nouveau contexte ?",
    "cat": "Motivation",
    "orientation": "Affiliation"
  },
  {
    "text": "Pr√©f√©rez-vous collaborer que r√©ussir seul(e) ?",
    "cat": "Motivation",
    "orientation": "Affiliation"
  },
  {
    "text": "L‚Äôambiance dans une √©quipe est-elle plus importante que le salaire que vous gagnez ?",
    "cat": "Motivation",
    "orientation": "Affiliation"
  },
  {
    "text": "Faites-vous attention √† ne pas blesser les autres dans vos choix ?",
    "cat": "Motivation",
    "orientation": "Affiliation"
  },
  {
    "text": "Vous appuyez-vous sur vos exp√©riences pour prendre des d√©cisions ?",
    "cat": "Rapport au temps",
    "orientation": "Pass√©"
  },
  {
    "text": "Avez-vous tendance √† vous r√©f√©rer √† ce que vous connaissez d√©j√† ?",
    "cat": "Rapport au temps",
    "orientation": "Pass√©"
  },
  {
    "text": "Pr√©f√©rez-vous les traditions aux nouveaut√©s ?",
    "cat": "Rapport au temps",
    "orientation": "Pass√©"
  },
  {
    "text": "Revenez-vous souvent sur des √©v√©nements pass√©s pour comprendre le pr√©sent ?",
    "cat": "Rapport au temps",
    "orientation": "Pass√©"
  },
  {
    "text": "Est-ce que vos souvenirs guident souvent vos choix ?",
    "cat": "Rapport au temps",
    "orientation": "Pass√©"
  },
  {
    "text": "Vous concentrez-vous davantage sur ce que vous vivez ici et maintenant ?",
    "cat": "Rapport au temps",
    "orientation": "Pr√©sent"
  },
  {
    "text": "Avez-vous du mal √† faire des plans √† long terme ?",
    "cat": "Rapport au temps",
    "orientation": "Pr√©sent"
  },
  {
    "text": "Est-ce que vous agissez surtout en fonction de ce qui se passe aujourd‚Äôhui ?",
    "cat": "Rapport au temps",
    "orientation": "Pr√©sent"
  },
  {
    "text": "Vous sentez-vous guid√©(e) par vos ressentis du moment ?",
    "cat": "Rapport au temps",
    "orientation": "Pr√©sent"
  },
  {
    "text": "R√©agissez-vous davantage √† ce qui se passe tout de suite qu‚Äô√† ce qui pourrait arriver ?",
    "cat": "Rapport au temps",
    "orientation": "Pr√©sent"
  },
  {
    "text": "Faites-vous souvent des projets √† long terme ?",
    "cat": "Rapport au temps",
    "orientation": "Futur"
  },
  {
    "text": "Avez-vous besoin de visualiser l‚Äôavenir pour vous sentir motiv√©(e) ?",
    "cat": "Rapport au temps",
    "orientation": "Futur"
  },
  {
    "text": "Planifiez-vous beaucoup ce que vous allez faire dans les semaines √† venir ?",
    "cat": "Rapport au temps",
    "orientation": "Futur"
  },
  {
    "text": "Pensez-vous souvent √† ce que vous voulez devenir ?",
    "cat": "Rapport au temps",
    "orientation": "Futur"
  },
  {
    "text": "Anticipez-vous les cons√©quences futures de vos d√©cisions ?",
    "cat": "Rapport au temps",
    "orientation": "Futur"
  },
  {
    "text": "Les odeurs influencent-elles facilement votre humeur ?",
    "cat": "VAKOG",
    "orientation": "Olfactif"
  },
  {
    "text": "√ätes-vous tr√®s sensible aux parfums ou aux odeurs fortes ?",
    "cat": "VAKOG",
    "orientation": "Olfactif"
  },
  {
    "text": "Vous rappelez-vous facilement d‚Äôune personne gr√¢ce √† son odeur ?",
    "cat": "VAKOG",
    "orientation": "Olfactif"
  },
  {
    "text": "Avez-vous des odeurs pr√©f√©r√©es qui vous apaisent ou vous stimulent ?",
    "cat": "VAKOG",
    "orientation": "Olfactif"
  },
  {
    "text": "Une odeur peut-elle suffire √† vous rappeler un souvenir ?",
    "cat": "VAKOG",
    "orientation": "Olfactif"
  },
  {
    "text": "Le go√ªt influence-t-il fortement votre exp√©rience d‚Äôun moment ?",
    "cat": "VAKOG",
    "orientation": "Gustatif"
  },
  {
    "text": "Choisissez-vous des lieux ou √©v√©nements selon ce que vous allez y manger ?",
    "cat": "VAKOG",
    "orientation": "Gustatif"
  },
  {
    "text": "Vous arrive-t-il de manger juste pour le plaisir du go√ªt, sans faim ?",
    "cat": "VAKOG",
    "orientation": "Gustatif"
  },
  {
    "text": "Un bon plat peut-il am√©liorer votre humeur ?",
    "cat": "VAKOG",
    "orientation": "Gustatif"
  },
  {
    "text": "Le partage de repas est-il un moment important pour vous ?",
    "cat": "VAKOG",
    "orientation": "Gustatif"
  },
  {
    "text": "Pensez-vous d‚Äôabord √† vous avant d‚Äôaider les autres ?",
    "cat": "Inconnu",
    "orientation": "Tourn√© vers soi"
  },
  {
    "text": "Votre propre bien-√™tre passe-t-il en priorit√© dans vos d√©cisions ?",
    "cat": "Inconnu",
    "orientation": "Tourn√© vers soi"
  },
  {
    "text": "Avez-vous besoin d‚Äô√™tre align√©(e) avec vous-m√™me avant d‚Äôagir ?",
    "cat": "Inconnu",
    "orientation": "Tourn√© vers soi"
  },
  {
    "text": "Votre confort personnel est-il une condition essentielle √† votre implication ?",
    "cat": "Inconnu",
    "orientation": "Tourn√© vers soi"
  },
  {
    "text": "Faites-vous passer vos besoins en premier dans un groupe ?",
    "cat": "Inconnu",
    "orientation": "Tourn√© vers soi"
  },
  {
    "text": "Anticipez-vous souvent les besoins ou attentes des autres ?",
    "cat": "Inconnu",
    "orientation": "Tourn√© vers les autres"
  },
  {
    "text": "Vos choix sont-ils souvent guid√©s par le plaisir que cela procurera aux autres ?",
    "cat": "Inconnu",
    "orientation": "Tourn√© vers les autres"
  },
  {
    "text": "Pr√©f√©rez-vous faire plaisir quitte √† vous contraindre un peu ?",
    "cat": "Inconnu",
    "orientation": "Tourn√© vers les autres"
  },
  {
    "text": "Vous sentez-vous responsable du bien-√™tre des autres ?",
    "cat": "Inconnu",
    "orientation": "Tourn√© vers les autres"
  },
  {
    "text": "Est-il important pour vous d‚Äô√™tre per√ßu(e) comme quelqu‚Äôun d‚Äôattentionn√© ?",
    "cat": "Inconnu",
    "orientation": "Tourn√© vers les autres"
  },
  {
    "text": "Aimez-vous comprendre les grandes lignes avant d‚Äôentrer dans les d√©tails ?",
    "cat": "Focus",
    "orientation": "Global"
  },
  {
    "text": "Pr√©f√©rez-vous les visions d‚Äôensemble aux explications minutieuses ?",
    "cat": "Focus",
    "orientation": "Global"
  },
  {
    "text": "Avez-vous besoin de situer les choses dans un cadre g√©n√©ral ?",
    "cat": "Focus",
    "orientation": "Global"
  },
  {
    "text": "Est-ce que les d√©tails vous int√©ressent surtout une fois la vue d‚Äôensemble comprise ?",
    "cat": "Focus",
    "orientation": "Global"
  },
  {
    "text": "Avez-vous du mal √† rester concentr√©(e) sur des choses trop pr√©cises ?",
    "cat": "Focus",
    "orientation": "Global"
  },
  {
    "text": "Aimez-vous d√©cortiquer les choses en √©l√©ments pr√©cis ?",
    "cat": "Focus",
    "orientation": "D√©tail"
  },
  {
    "text": "Sur un mur nouvellement peint, allez-vous voir instantan√©ment le petit d√©tail mal fait ?",
    "cat": "Focus",
    "orientation": "D√©tail"
  },
  {
    "text": "Vous attachez-vous aux d√©tails avant d‚Äôembrasser une vision globale ?",
    "cat": "Focus",
    "orientation": "D√©tail"
  },
  {
    "text": "Les choses inexactes ou floues vous mettent-elles mal √† l‚Äôaise ?",
    "cat": "Focus",
    "orientation": "D√©tail"
  },
  {
    "text": "Vous sentez-vous rassur√©(e) par des donn√©es pr√©cises ?",
    "cat": "Focus",
    "orientation": "D√©tail"
  },
  {
    "text": "Avez-vous besoin de calme pour vous ressourcer ?",
    "cat": "√ânergie",
    "orientation": "Introverti"
  },
  {
    "text": "Pr√©f√©rez-vous les interactions en petit comit√© ?",
    "cat": "√ânergie",
    "orientation": "Introverti"
  },
  {
    "text": "Le temps seul(e) est-il vital pour votre √©quilibre ?",
    "cat": "√ânergie",
    "orientation": "Introverti"
  },
  {
    "text": "Trouvez-vous fatigantes les r√©unions sociales prolong√©es ?",
    "cat": "√ânergie",
    "orientation": "Introverti"
  },
  {
    "text": "Vous sentez-vous plus vous-m√™me dans l‚Äôintimit√© que dans un groupe ?",
    "cat": "√ânergie",
    "orientation": "Introverti"
  },
  {
    "text": "Vous sentez-vous √©nergis√©(e) par la pr√©sence des autres ?",
    "cat": "√ânergie",
    "orientation": "Extraverti"
  },
  {
    "text": "Avez-vous tendance √† parler pour r√©fl√©chir ?",
    "cat": "√ânergie",
    "orientation": "Extraverti"
  },
  {
    "text": "Cherchez-vous la compagnie plut√¥t que la solitude ?",
    "cat": "√ânergie",
    "orientation": "Extraverti"
  },
  {
    "text": "Les environnements dynamiques vous stimulent-ils ?",
    "cat": "√ânergie",
    "orientation": "Extraverti"
  },
  {
    "text": "Pr√©f√©rez-vous partager vos pens√©es plut√¥t que les garder pour vous ?",
    "cat": "√ânergie",
    "orientation": "Extraverti"
  }
];

// -------- COMPUTE --------
function computeResults(answers, questions) {
  const metaTotals = {
    "VAKOG": {}, "Proc√©dure / Option": {}, "Proactif / R√©actif": {}, "Rapport au temps": {}, "Motivation": {}, "Orientation": {}, "√ânergie": {}, "Focus": {},
  };

  answers.forEach((ans, i) => {
    if (ans == null) return;
    const q = questions[i];
    const cat = q.cat;
    const orient = q.orientation;
    metaTotals[cat][orient] = (metaTotals[cat][orient] || 0) + ans;
  });

  const metaPercent = {};
  Object.keys(metaTotals).forEach(cat => {
    const pans = metaTotals[cat];
    const sumAll = Object.values(pans).reduce((s,v)=>s+v,0);
    metaPercent[cat] = {};
    Object.keys(pans).forEach(p => {
      metaPercent[cat][p] = sumAll === 0 ? 0 : Math.round((pans[p]/sumAll)*100);
    });
  });
  return { metaTotals, metaPercent };
}

// -------- RENDER --------
const quizBody = document.getElementById('quizBody');
const progressBar = document.getElementById('progressBar');
const btnNext = document.getElementById('btnNext');
const btnSend = document.getElementById('btnSend');

const QUESTIONS = BONUS_QUESTIONS.sort(() => Math.random()-0.5).slice(0,105);
let currentPage = 0;
const totalPages = Math.ceil(QUESTIONS.length / QUESTIONS_PER_PAGE);
const answers = new Array(QUESTIONS.length).fill(null);

function renderPage(pageIdx) {
  quizBody.innerHTML = '';
  const start = pageIdx * QUESTIONS_PER_PAGE;
  const end = Math.min(start + QUESTIONS_PER_PAGE, QUESTIONS.length);
  for (let i=start; i<end; i++) {
    const q = QUESTIONS[i];
    const qDiv = document.createElement('div');
    qDiv.className = 'question';
    qDiv.innerHTML = `<p><strong>Q${i+1}.</strong> ${q.text} <br><small>${q.cat} ‚Äì ${q.orientation}</small></p>`;
    ['non','rarement','souvent','oui'].forEach(opt => {
      const id = `q${i}_${opt}`;
      const label = document.createElement('label');
      label.innerHTML = `<input type="radio" name="q${i}" id="${id}" value="${ANSWER_VALUES[opt]}"> ${opt}`;
      label.querySelector('input').addEventListener('change', e=>answers[i]=Number(e.target.value));
      qDiv.appendChild(label);
    });
    quizBody.appendChild(qDiv);
  }
  progressBar.style.width = `${Math.round(((pageIdx)/Math.max(1,totalPages-1))*100)}%`;
  btnNext.textContent = pageIdx===totalPages-1 ? "V√©rifier & Envoyer" : "Suivant";
}

btnNext.addEventListener('click', () => {
  if (currentPage < totalPages-1) {
    currentPage++;
    renderPage(currentPage);
    return;
  }
  document.getElementById('quiz').hidden = true;
  document.getElementById('collectEmail').hidden = false;
});

btnSend.addEventListener('click', () => {
  const email = document.getElementById('email').value.trim();
  const consent = document.getElementById('consent').checked;
  if (!email || !consent) { alert("Veuillez renseigner votre e-mail et accepter la clause."); return; }

  const { metaTotals, metaPercent } = computeResults(answers, QUESTIONS);
  const segments = [];
  Object.keys(metaPercent).forEach(cat => {
    const pans = metaPercent[cat];
    const best = Object.keys(pans).reduce((a,b)=>pans[a]>=pans[b]?a:b);
    segments.push(`${cat}:${best}`);
  });

  const captchaToken = document.getElementById('g-recaptcha-response')?.value || '';
  const payload = {
    email,
    metaTotals,
    metaPercent,
    segments,
    bonus_id: "tome1",
    response: captchaToken,
    interpretation_text: generateInterpretation(metaPercent)
  };

  fetch(SUBMIT_URL, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload)
  }).then(r=>r.json()).then(data=>{
    if (data.status==="duplicate") {
      alert("‚ö†Ô∏è Cette adresse e-mail a d√©j√† √©t√© utilis√©e.");
    } else if (data.status==="ok") {
      document.getElementById('collectEmail').hidden = true;
      document.getElementById('thanks').style.display = 'block';
      document.getElementById('toEmail').textContent = email;
    } else if (data.status==="captcha_failed") {
      alert("Captcha invalide. Merci de r√©essayer.");
    } else {
      alert("Envoi termin√©. V√©rifiez vos mails.");
    }
  }).catch(err=>{
    console.error("Erreur envoi :", err);
    alert("Impossible d‚Äôenvoyer le formulaire.");
  });
});


function generateInterpretation(metaPercent) {
  let text = "";

  // Motivation
  if (metaPercent["Motivation"]) {
    const m = metaPercent["Motivation"];
    if (m["Pouvoir"] >= 50) {
      text += `Vous avancez avec une belle √©nergie de Pouvoir (${m["Pouvoir"]}%). Cela fait de vous un¬∑e partenaire passionn√©¬∑e, toujours pr√™t¬∑e √† prendre les devants. Avec un¬∑e amoureux¬∑se aussi Pouvoir, attendez-vous √† des √©tincelles et parfois des orages. Mais aux c√¥t√©s d‚Äôun¬∑e Objectif ou Affiliation, votre force trouve un merveilleux √©quilibre.\n\n`;
    }
    if (m["Objectif"] >= 50) {
      text += `Votre motivation principale est tourn√©e vers les Objectifs (${m["Objectif"]}%). Vous aimez avancer concr√®tement et atteindre vos buts. Avec un¬∑e partenaire Pouvoir, la relation peut √™tre stimulante mais parfois tendue. Avec un¬∑e amoureux¬∑se Affiliation, vous trouvez la douceur qui apaise vos √©lans de performance.\n\n`;
    }
    if (m["Affiliation"] >= 50) {
      text += `Votre c≈ìur s‚Äôoriente avant tout vers l‚ÄôAffiliation (${m["Affiliation"]}%). Vous cherchez l‚Äôharmonie, le lien et la complicit√©. Deux partenaires Affiliation cr√©ent un couple fusionnel et tendre, mais parfois trop d√©pendant. Avec un¬∑e Pouvoir ou Objectif, vous trouvez l‚Äôancrage et la structure qui renforcent votre douceur naturelle.\n\n`;
    }
  }

  // Proactif / R√©actif
  if (metaPercent["Proactif / R√©actif"]) {
    const m = metaPercent["Proactif / R√©actif"];
    if (m["Proactif"] >= 50) {
      text += `Votre style est r√©solument Proactif (${m["Proactif"]}%). Vous aimez agir vite, d√©cider et entra√Æner l‚Äôautre dans votre √©lan. Avec un¬∑e partenaire aussi Proactif, la relation sera intense, parfois pr√©cipit√©e. Avec un¬∑e R√©actif, vous trouverez un bel √©quilibre entre action et r√©flexion.\n\n`;
    }
    if (m["R√©actif"] >= 50) {
      text += `Votre style est plut√¥t R√©actif (${m["R√©actif"]}%). Vous aimez observer, comprendre, prendre le temps avant d‚Äôagir. Deux R√©actifs cr√©ent une relation rassurante mais parfois trop lente. Avec un¬∑e Proactif, vous gagnez en dynamisme et en mouvement.\n\n`;
    }
  }

  // Option / Proc√©dure
  if (metaPercent["Proc√©dure / Option"]) {
    const m = metaPercent["Proc√©dure / Option"];
    if (m["Option"] >= 50) {
      text += `Vous avez une belle √©nergie Option (${m["Option"]}%). Vous aimez la libert√©, explorer, multiplier les possibles. Deux partenaires Option partagent l‚Äôenthousiasme mais risquent parfois de manquer de stabilit√©. Avec un¬∑e Proc√©dure, vous trouvez l‚Äôancrage n√©cessaire.\n\n`;
    }
    if (m["Proc√©dure"] >= 50) {
      text += `Vous √™tes plut√¥t Proc√©dure (${m["Proc√©dure"]}%). Vous aimez les rep√®res clairs, les m√©thodes, l‚Äôordre. Deux Proc√©dure construisent une relation solide mais parfois trop rigide. Avec un¬∑e Option, vous d√©couvrez la souplesse et la cr√©ativit√© qui enrichissent votre cadre.\n\n`;
    }
  }

  // Rapport au temps
  if (metaPercent["Rapport au temps"]) {
    const m = metaPercent["Rapport au temps"];
    if (m["Pass√©"] >= 50) {
      text += `Votre regard est tourn√© vers le Pass√© (${m["Pass√©"]}%). Vous valorisez la m√©moire, les exp√©riences v√©cues. Avec un¬∑e partenaire tr√®s Futur, vous risquez de ne pas toujours vous comprendre. Avec un¬∑e amoureux¬∑se Pr√©sent, vous trouvez un √©quilibre entre souvenir et instant.\n\n`;
    }
    if (m["Pr√©sent"] >= 50) {
      text += `Votre rapport au temps est ancr√© dans le Pr√©sent (${m["Pr√©sent"]}%). Vous aimez savourer l‚Äôinstant et la spontan√©it√©. Deux Pr√©sents partagent une intensit√© joyeuse mais parfois insouciante. Avec un¬∑e Pass√© ou Futur, vous trouvez stabilit√© ou vision.\n\n`;
    }
    if (m["Futur"] >= 50) {
      text += `Votre √©nergie se projette vers le Futur (${m["Futur"]}%). Vous aimez planifier, r√™ver, avancer. Avec un¬∑e partenaire tr√®s Pass√©, il peut y avoir des incompr√©hensions. Avec un¬∑e amoureux¬∑se Pr√©sent ou Futur, vous trouvez un terrain de complicit√©.\n\n`;
    }
  }

  // √ânergie (Introverti / Extraverti)
  if (metaPercent["√ânergie"]) {
    const m = metaPercent["√ânergie"];
    if (m["Introverti"] >= 50) {
      text += `Votre √©nergie relationnelle est Introvertie (${m["Introverti"]}%). Deux Introvertis se comprennent √† merveille, partageant le calme et l‚Äôint√©riorit√©. Avec un¬∑e Extraverti tr√®s marqu√©, il faudra apprendre √† c√©l√©brer vos diff√©rences plut√¥t que de les subir.\n\n`;
    }
    if (m["Extraverti"] >= 50) {
      text += `Votre √©nergie relationnelle est Extravertie (${m["Extraverti"]}%). Deux Extravertis partagent une complicit√© p√©tillante, pleine de mouvement et d‚Äôexpression. Avec un¬∑e Introverti tr√®s marqu√©, des tensions peuvent na√Ætre si chacun ne respecte pas le rythme de l‚Äôautre.\n\n`;
    }
  }

  return text.trim();
}


// INIT
renderPage(0);
</script>


<script>
function showPage(pageIndex) {
  const pages = document.querySelectorAll('.page');
  pages.forEach((page, i) => {
    if (i === pageIndex) {
      page.classList.add('active');
    } else {
      page.classList.remove('active');
    }
  });
  updateProgress(pageIndex + 1, pages.length);
}
</script>


<script>
function validatePage(pageIndex) {
  const page = document.querySelectorAll('.page')[pageIndex];
  const questions = page.querySelectorAll('.question');
  for (let q of questions) {
    const inputs = q.querySelectorAll('input[type="radio"]');
    const checked = Array.from(inputs).some(i => i.checked);
    if (!checked) {
      alert("üí° Merci de r√©pondre √† toutes les questions pour continuer, cela rendra votre profil plus pr√©cis ‚ù§Ô∏è");
      return false;
    }
  }
  return true;
}
function nextPage(currentPage) {
  if (!validatePage(currentPage)) return;
  showPage(currentPage + 1);
}
</script>

</body>
</html>
