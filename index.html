<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MetaLove Questionnaire</title>
  
<style>
  body {
    background-color: #0d1f1f; /* sarcelle foncé */
    color: #f0f0f0;
    font-family: 'Poppins', sans-serif;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }
  header {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    background-color: transparent;
  }
  header h1 {
    font-size: 1.8em;
    margin-right: 15px;
  }
  header .blob {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, turquoise, pink, lightgreen);
    border-radius: 50%;
    box-shadow: 0 0 15px rgba(255,255,255,0.3);
  }
  header p {
    width: 100%;
    text-align: center;
    margin-top: 10px;
    font-size: 0.9em;
    color: #ccc;
  }
  .question {
    background: #123232;
    border-radius: 12px;
    padding: 15px;
    margin: 15px 0;
    box-shadow: 0 2px 6px rgba(0,0,0,0.5);
  }
  .options label {
    margin-right: 15px;
  }
  .options input[type="radio"] {
    margin-right: 5px;
  }

  /* Bouton suivant */
  
.next-btn {
    background: #222 !important;
    color: #fff !important;
    padding: 12px 25px;
    border: none;
    border-radius: 25px;
    font-size: 1em;
    cursor: pointer;
    margin: 20px auto !important;
    display: block !important;
    text-align: center;
    position: relative;
    overflow: hidden;
    transition: background 0.3s ease-in-out, transform 0.2s;
}
.next-btn:hover {
    background: #333 !important;
    transform: scale(1.05);
}
.next-btn::after {
    content: "";
    position: absolute;
    left: 0; right: 0; bottom: -2px; height: 3px;
    background: linear-gradient(90deg, pink, turquoise, lightgreen);
    border-radius: 2px;
}

  .next-btn:hover {
    background: #333;
    transform: scale(1.05);
  }
  .next-btn::after {
    content: "";
    position: absolute;
    left: 0; right: 0; bottom: -2px; height: 3px;
    background: linear-gradient(90deg, pink, turquoise, lightgreen);
    border-radius: 2px;
  }

  /* Barre progression toujours en bas */
  .footer-progress {
    margin-top: auto;
    width: 100%;
    padding: 10px 20px;
  }
  #progressBarContainer {
    width: 100%;
    height: 12px;
    background: #333;
    border-radius: 6px;
    overflow: hidden;
  }
  #progressBar {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, pink, yellow, lightgreen);
    transition: width 0.3s ease-in-out;
  }
</style>

  <script src="https://www.google.com/recaptcha/api.js" async defer></script>


<style>
  body {
    background-color: #0d1f1f; /* sarcelle foncé */
    color: #f0f0f0;
    font-family: 'Poppins', sans-serif;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }
  header {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    background-color: transparent;
  }
  header h1 {
    font-size: 1.8em;
    margin-right: 15px;
  }
  header .blob {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, turquoise, pink, lightgreen);
    border-radius: 50%;
    box-shadow: 0 0 15px rgba(255,255,255,0.3);
  }
  header p {
    width: 100%;
    text-align: center;
    margin-top: 10px;
    font-size: 0.9em;
    color: #ccc;
  }
  .question {
    background: #123232;
    border-radius: 12px;
    padding: 15px;
    margin: 15px 0;
    box-shadow: 0 2px 6px rgba(0,0,0,0.5);
  }
  .options label {
    margin-right: 15px;
  }
  .options input[type="radio"] {
    margin-right: 5px;
  }

  /* Bouton suivant */
  
.next-btn {
    background: #222 !important;
    color: #fff !important;
    padding: 12px 25px;
    border: none;
    border-radius: 25px;
    font-size: 1em;
    cursor: pointer;
    margin: 20px auto !important;
    display: block !important;
    text-align: center;
    position: relative;
    overflow: hidden;
    transition: background 0.3s ease-in-out, transform 0.2s;
}
.next-btn:hover {
    background: #333 !important;
    transform: scale(1.05);
}
.next-btn::after {
    content: "";
    position: absolute;
    left: 0; right: 0; bottom: -2px; height: 3px;
    background: linear-gradient(90deg, pink, turquoise, lightgreen);
    border-radius: 2px;
}

  .next-btn:hover {
    background: #333;
    transform: scale(1.05);
  }
  .next-btn::after {
    content: "";
    position: absolute;
    left: 0; right: 0; bottom: -2px; height: 3px;
    background: linear-gradient(90deg, pink, turquoise, lightgreen);
    border-radius: 2px;
  }

  /* Barre progression toujours en bas */
  .footer-progress {
    margin-top: auto;
    width: 100%;
    padding: 10px 20px;
  }
  #progressBarContainer {
    width: 100%;
    height: 12px;
    background: #333;
    border-radius: 6px;
    overflow: hidden;
  }
  #progressBar {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, pink, yellow, lightgreen);
    transition: width 0.3s ease-in-out;
  }
</style>




<style>
  body {
    background-color: #0d1f1f; /* sarcelle foncé */
    color: #f0f0f0;
    font-family: 'Poppins', sans-serif;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }
  header {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    background-color: transparent;
  }
  header h1 {
    font-size: 1.8em;
    margin-right: 15px;
  }
  header .blob {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, turquoise, pink, lightgreen);
    border-radius: 50%;
    box-shadow: 0 0 15px rgba(255,255,255,0.3);
  }
  header p {
    width: 100%;
    text-align: center;
    margin-top: 10px;
    font-size: 0.9em;
    color: #ccc;
  }
  .question {
    background: #123232;
    border-radius: 12px;
    padding: 15px;
    margin: 15px 0;
    box-shadow: 0 2px 6px rgba(0,0,0,0.5);
  }
  .options label {
    margin-right: 15px;
  }
  .options input[type="radio"] {
    margin-right: 5px;
  }

  /* Bouton suivant */
  
.next-btn {
    background: #222 !important;
    color: #fff !important;
    padding: 12px 25px;
    border: none;
    border-radius: 25px;
    font-size: 1em;
    cursor: pointer;
    margin: 20px auto !important;
    display: block !important;
    text-align: center;
    position: relative;
    overflow: hidden;
    transition: background 0.3s ease-in-out, transform 0.2s;
}
.next-btn:hover {
    background: #333 !important;
    transform: scale(1.05);
}
.next-btn::after {
    content: "";
    position: absolute;
    left: 0; right: 0; bottom: -2px; height: 3px;
    background: linear-gradient(90deg, pink, turquoise, lightgreen);
    border-radius: 2px;
}

  .next-btn:hover {
    background: #333;
    transform: scale(1.05);
  }
  .next-btn::after {
    content: "";
    position: absolute;
    left: 0; right: 0; bottom: -2px; height: 3px;
    background: linear-gradient(90deg, pink, turquoise, lightgreen);
    border-radius: 2px;
  }

  /* Barre progression toujours en bas */
  .footer-progress {
    margin-top: auto;
    width: 100%;
    padding: 10px 20px;
  }
  #progressBarContainer {
    width: 100%;
    height: 12px;
    background: #333;
    border-radius: 6px;
    overflow: hidden;
  }
  #progressBar {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, pink, yellow, lightgreen);
    transition: width 0.3s ease-in-out;
  }
</style>


</head>
<body>

<header>
  <h1>Test des métaprogrammes amoureux</h1>
  <div class="blob"></div>
</header>
<p style="text-align:center;">Répondez spontanément, il n’y a pas de bonne ou mauvaise réponse.</p>


<h1>Test des métaprogrammes – Bonus Tome 1</h1>

<div id="quiz">
  <div id="progressBarContainer"><div id="progressBar"></div></div>
  <div id="quizBody"></div>
  <button id="btnNext">Suivant</button>
</div>

<div id="collectEmail" hidden>
  <p></p>
</div>

<script>
// -------- CONFIG --------
const SUBMIT_URL = "https://hook.eu2.make.com/nq8suncrqqr7vqvothftezfygqrufqh2";
const QUESTIONS_PER_PAGE = 5;
const ANSWER_VALUES = { "non": 0, "rarement": 25, "souvent": 75, "oui": 100 };

// -------- QUESTIONS --------
const BONUS_QUESTIONS = [
  {
    "text": "Vous souvenez-vous plus facilement des visages que des noms ?",
    "cat": "VAKOG",
    "orientation": "Visuel"
  },
  {
    "text": "Aimez-vous organiser votre espace de travail de façon esthétique et harmonieuse ?",
    "cat": "VAKOG",
    "orientation": "Visuel"
  },
  {
    "text": "Choisissez-vous vos vêtements principalement en fonction de leur apparence visuelle ?",
    "cat": "VAKOG",
    "orientation": "Visuel"
  },
  {
    "text": "Lorsqu'on vous explique quelque chose, préférez-vous voir un schéma ou un dessin à la place ?",
    "cat": "VAKOG",
    "orientation": "Visuel"
  },
  {
    "text": "Avez-vous tendance à visualiser mentalement vos projets ou vos idées ?",
    "cat": "VAKOG",
    "orientation": "Visuel"
  },
  {
    "text": "Lorsque vous entendez une voix familière, la reconnaissez-vous rapidement, même sans voir la personne ?",
    "cat": "VAKOG",
    "orientation": "Auditif"
  },
  {
    "text": "Entendez-vous une voix intérieure qui accompagne votre lecture, comme si vous vous racontiez l’histoire à vous-même ?",
    "cat": "VAKOG",
    "orientation": "Auditif"
  },
  {
    "text": "Lorsqu’on vous donne des consignes, les retenir à l’oral vous est-il facile ?",
    "cat": "VAKOG",
    "orientation": "Auditif"
  },
  {
    "text": "Le bruit de fond vous gêne-t-il facilement pour vous concentrer ?",
    "cat": "VAKOG",
    "orientation": "Auditif"
  },
  {
    "text": "Avez-vous besoin de verbaliser vos idées à haute voix pour les clarifier ?",
    "cat": "VAKOG",
    "orientation": "Auditif"
  },
  {
    "text": "Êtes-vous particulièrement sensible à la texture des vêtements que vous portez ?",
    "cat": "VAKOG",
    "orientation": "Kinesthésique"
  },
  {
    "text": "Avez-vous du mal à rester concentré(e) sans bouger, même légèrement ?",
    "cat": "VAKOG",
    "orientation": "Kinesthésique"
  },
  {
    "text": "Apprenez-vous plus facilement en manipulant ou en expérimentant directement ?",
    "cat": "VAKOG",
    "orientation": "Kinesthésique"
  },
  {
    "text": "Avez-vous besoin de ressentir physiquement un lieu pour savoir si vous vous y sentez bien ?",
    "cat": "VAKOG",
    "orientation": "Kinesthésique"
  },
  {
    "text": "Évitez-vous certains vêtements, même beaux, s’ils sont trop serrés ou inconfortables ?",
    "cat": "VAKOG",
    "orientation": "Kinesthésique"
  },
  {
    "text": "Aimez-vous avoir plusieurs manières possibles d’aborder une même tâche ?",
    "cat": "Procédure / Option",
    "orientation": "Option"
  },
  {
    "text": "Préférez-vous improviser plutôt que suivre une méthode fixe ?",
    "cat": "Procédure / Option",
    "orientation": "Option"
  },
  {
    "text": "Vous sentez-vous limité(e) lorsqu’on vous impose une seule façon de faire ?",
    "cat": "Procédure / Option",
    "orientation": "Option"
  },
  {
    "text": "Avez-vous tendance à adapter les règles plutôt qu’à les suivre strictement ?",
    "cat": "Procédure / Option",
    "orientation": "Option"
  },
  {
    "text": "Appréciez-vous les formations ouvertes plutôt que très structurées ?",
    "cat": "Procédure / Option",
    "orientation": "Option"
  },
  {
    "text": "Avez-vous besoin de consignes claires avant de commencer une tâche ?",
    "cat": "Procédure / Option",
    "orientation": "Procédure"
  },
  {
    "text": "Préférez-vous suivre une méthode pas à pas plutôt que d’improviser ?",
    "cat": "Procédure / Option",
    "orientation": "Procédure"
  },
  {
    "text": "Est-ce que l’absence de cadre vous déstabilise ?",
    "cat": "Procédure / Option",
    "orientation": "Procédure"
  },
  {
    "text": "Aimez-vous quand les choses sont bien organisées et logiques ?",
    "cat": "Procédure / Option",
    "orientation": "Procédure"
  },
  {
    "text": "Vous sentez-vous plus efficace avec un plan établi à l’avance ?",
    "cat": "Procédure / Option",
    "orientation": "Procédure"
  },
  {
    "text": "Prenez-vous souvent les devants pour résoudre un problème ?",
    "cat": "Proactif / Réactif",
    "orientation": "Proactif"
  },
  {
    "text": "Initiez-vous souvent les projets ou les discussions ?",
    "cat": "Proactif / Réactif",
    "orientation": "Proactif"
  },
  {
    "text": "Avez-vous tendance à agir plutôt qu’attendre ?",
    "cat": "Proactif / Réactif",
    "orientation": "Proactif"
  },
  {
    "text": "Êtes-vous à l’aise dans les situations qui demandent de la réactivité ?",
    "cat": "Proactif / Réactif",
    "orientation": "Proactif"
  },
  {
    "text": "Cherchez-vous rapidement des solutions quand un obstacle survient ?",
    "cat": "Proactif / Réactif",
    "orientation": "Proactif"
  },
  {
    "text": "Avez-vous besoin de prendre le temps de réfléchir avant d’agir ?",
    "cat": "Proactif / Réactif",
    "orientation": "Réactif"
  },
  {
    "text": "Préférez-vous observer avant de vous lancer dans une nouvelle activité ?",
    "cat": "Proactif / Réactif",
    "orientation": "Réactif"
  },
  {
    "text": "Avez-vous tendance à réagir plutôt qu’à initier ?",
    "cat": "Proactif / Réactif",
    "orientation": "Réactif"
  },
  {
    "text": "Est-ce que vous vous sentez plus à l’aise lorsqu’un cadre est déjà posé ?",
    "cat": "Proactif / Réactif",
    "orientation": "Réactif"
  },
  {
    "text": "L’attente d’un déclencheur extérieur vous rassure-t-elle avant de commencer ?",
    "cat": "Proactif / Réactif",
    "orientation": "Réactif"
  },
  {
    "text": "Souhaitez-vous influencer les décisions dans un groupe ?",
    "cat": "Motivation",
    "orientation": "Pouvoir"
  },
  {
    "text": "Vous sentez-vous motivé(e) par le fait d’être reconnu(e) comme leader ?",
    "cat": "Motivation",
    "orientation": "Pouvoir"
  },
  {
    "text": "Avez-vous besoin d’avoir le contrôle sur ce que vous entreprenez ?",
    "cat": "Motivation",
    "orientation": "Pouvoir"
  },
  {
    "text": "Est-ce que relever des défis vous stimule ?",
    "cat": "Motivation",
    "orientation": "Pouvoir"
  },
  {
    "text": "Avez-vous tendance à vouloir réaliser ce qu’on vous croit incapable de faire ?",
    "cat": "Motivation",
    "orientation": "Pouvoir"
  },
  {
    "text": "Vous fixez-vous des buts clairs avant d’agir ?",
    "cat": "Motivation",
    "orientation": "Objectif"
  },
  {
    "text": "Avez-vous besoin d’un résultat concret pour vous sentir motivé(e) ?",
    "cat": "Motivation",
    "orientation": "Objectif"
  },
  {
    "text": "Est-ce que la performance pour vous s’évalue par l’atteinte d’un résultat plutôt que par ce que vous avez appris ?",
    "cat": "Motivation",
    "orientation": "Objectif"
  },
  {
    "text": "Planifiez-vous vos actions avec une idée précise du résultat attendu ?",
    "cat": "Motivation",
    "orientation": "Objectif"
  },
  {
    "text": "Vous sentez-vous plus à l’aise quand vous savez exactement où vous allez ?",
    "cat": "Motivation",
    "orientation": "Objectif"
  },
  {
    "text": "Est-il important pour vous d’être bien intégré(e) dans un groupe ?",
    "cat": "Motivation",
    "orientation": "Affiliation"
  },
  {
    "text": "Cherchez-vous à créer des liens avant tout dans un nouveau contexte ?",
    "cat": "Motivation",
    "orientation": "Affiliation"
  },
  {
    "text": "Préférez-vous collaborer que réussir seul(e) ?",
    "cat": "Motivation",
    "orientation": "Affiliation"
  },
  {
    "text": "L’ambiance dans une équipe est-elle plus importante que le salaire que vous gagnez ?",
    "cat": "Motivation",
    "orientation": "Affiliation"
  },
  {
    "text": "Faites-vous attention à ne pas blesser les autres dans vos choix ?",
    "cat": "Motivation",
    "orientation": "Affiliation"
  },
  {
    "text": "Vous appuyez-vous sur vos expériences pour prendre des décisions ?",
    "cat": "Rapport au temps",
    "orientation": "Passé"
  },
  {
    "text": "Avez-vous tendance à vous référer à ce que vous connaissez déjà ?",
    "cat": "Rapport au temps",
    "orientation": "Passé"
  },
  {
    "text": "Préférez-vous les traditions aux nouveautés ?",
    "cat": "Rapport au temps",
    "orientation": "Passé"
  },
  {
    "text": "Revenez-vous souvent sur des événements passés pour comprendre le présent ?",
    "cat": "Rapport au temps",
    "orientation": "Passé"
  },
  {
    "text": "Est-ce que vos souvenirs guident souvent vos choix ?",
    "cat": "Rapport au temps",
    "orientation": "Passé"
  },
  {
    "text": "Vous concentrez-vous davantage sur ce que vous vivez ici et maintenant ?",
    "cat": "Rapport au temps",
    "orientation": "Présent"
  },
  {
    "text": "Avez-vous du mal à faire des plans à long terme ?",
    "cat": "Rapport au temps",
    "orientation": "Présent"
  },
  {
    "text": "Est-ce que vous agissez surtout en fonction de ce qui se passe aujourd’hui ?",
    "cat": "Rapport au temps",
    "orientation": "Présent"
  },
  {
    "text": "Vous sentez-vous guidé(e) par vos ressentis du moment ?",
    "cat": "Rapport au temps",
    "orientation": "Présent"
  },
  {
    "text": "Réagissez-vous davantage à ce qui se passe tout de suite qu’à ce qui pourrait arriver ?",
    "cat": "Rapport au temps",
    "orientation": "Présent"
  },
  {
    "text": "Faites-vous souvent des projets à long terme ?",
    "cat": "Rapport au temps",
    "orientation": "Futur"
  },
  {
    "text": "Avez-vous besoin de visualiser l’avenir pour vous sentir motivé(e) ?",
    "cat": "Rapport au temps",
    "orientation": "Futur"
  },
  {
    "text": "Planifiez-vous beaucoup ce que vous allez faire dans les semaines à venir ?",
    "cat": "Rapport au temps",
    "orientation": "Futur"
  },
  {
    "text": "Pensez-vous souvent à ce que vous voulez devenir ?",
    "cat": "Rapport au temps",
    "orientation": "Futur"
  },
  {
    "text": "Anticipez-vous les conséquences futures de vos décisions ?",
    "cat": "Rapport au temps",
    "orientation": "Futur"
  },
  {
    "text": "Les odeurs influencent-elles facilement votre humeur ?",
    "cat": "VAKOG",
    "orientation": "Olfactif"
  },
  {
    "text": "Êtes-vous très sensible aux parfums ou aux odeurs fortes ?",
    "cat": "VAKOG",
    "orientation": "Olfactif"
  },
  {
    "text": "Vous rappelez-vous facilement d’une personne grâce à son odeur ?",
    "cat": "VAKOG",
    "orientation": "Olfactif"
  },
  {
    "text": "Avez-vous des odeurs préférées qui vous apaisent ou vous stimulent ?",
    "cat": "VAKOG",
    "orientation": "Olfactif"
  },
  {
    "text": "Une odeur peut-elle suffire à vous rappeler un souvenir ?",
    "cat": "VAKOG",
    "orientation": "Olfactif"
  },
  {
    "text": "Le goût influence-t-il fortement votre expérience d’un moment ?",
    "cat": "VAKOG",
    "orientation": "Gustatif"
  },
  {
    "text": "Choisissez-vous des lieux ou événements selon ce que vous allez y manger ?",
    "cat": "VAKOG",
    "orientation": "Gustatif"
  },
  {
    "text": "Vous arrive-t-il de manger juste pour le plaisir du goût, sans faim ?",
    "cat": "VAKOG",
    "orientation": "Gustatif"
  },
  {
    "text": "Un bon plat peut-il améliorer votre humeur ?",
    "cat": "VAKOG",
    "orientation": "Gustatif"
  },
  {
    "text": "Le partage de repas est-il un moment important pour vous ?",
    "cat": "VAKOG",
    "orientation": "Gustatif"
  },
  {
    "text": "Pensez-vous d’abord à vous avant d’aider les autres ?",
    "cat": "Inconnu",
    "orientation": "Tourné vers soi"
  },
  {
    "text": "Votre propre bien-être passe-t-il en priorité dans vos décisions ?",
    "cat": "Inconnu",
    "orientation": "Tourné vers soi"
  },
  {
    "text": "Avez-vous besoin d’être aligné(e) avec vous-même avant d’agir ?",
    "cat": "Inconnu",
    "orientation": "Tourné vers soi"
  },
  {
    "text": "Votre confort personnel est-il une condition essentielle à votre implication ?",
    "cat": "Inconnu",
    "orientation": "Tourné vers soi"
  },
  {
    "text": "Faites-vous passer vos besoins en premier dans un groupe ?",
    "cat": "Inconnu",
    "orientation": "Tourné vers soi"
  },
  {
    "text": "Anticipez-vous souvent les besoins ou attentes des autres ?",
    "cat": "Inconnu",
    "orientation": "Tourné vers les autres"
  },
  {
    "text": "Vos choix sont-ils souvent guidés par le plaisir que cela procurera aux autres ?",
    "cat": "Inconnu",
    "orientation": "Tourné vers les autres"
  },
  {
    "text": "Préférez-vous faire plaisir quitte à vous contraindre un peu ?",
    "cat": "Inconnu",
    "orientation": "Tourné vers les autres"
  },
  {
    "text": "Vous sentez-vous responsable du bien-être des autres ?",
    "cat": "Inconnu",
    "orientation": "Tourné vers les autres"
  },
  {
    "text": "Est-il important pour vous d’être perçu(e) comme quelqu’un d’attentionné ?",
    "cat": "Inconnu",
    "orientation": "Tourné vers les autres"
  },
  {
    "text": "Aimez-vous comprendre les grandes lignes avant d’entrer dans les détails ?",
    "cat": "Focus",
    "orientation": "Global"
  },
  {
    "text": "Préférez-vous les visions d’ensemble aux explications minutieuses ?",
    "cat": "Focus",
    "orientation": "Global"
  },
  {
    "text": "Avez-vous besoin de situer les choses dans un cadre général ?",
    "cat": "Focus",
    "orientation": "Global"
  },
  {
    "text": "Est-ce que les détails vous intéressent surtout une fois la vue d’ensemble comprise ?",
    "cat": "Focus",
    "orientation": "Global"
  },
  {
    "text": "Avez-vous du mal à rester concentré(e) sur des choses trop précises ?",
    "cat": "Focus",
    "orientation": "Global"
  },
  {
    "text": "Aimez-vous décortiquer les choses en éléments précis ?",
    "cat": "Focus",
    "orientation": "Détail"
  },
  {
    "text": "Sur un mur nouvellement peint, allez-vous voir instantanément le petit détail mal fait ?",
    "cat": "Focus",
    "orientation": "Détail"
  },
  {
    "text": "Vous attachez-vous aux détails avant d’embrasser une vision globale ?",
    "cat": "Focus",
    "orientation": "Détail"
  },
  {
    "text": "Les choses inexactes ou floues vous mettent-elles mal à l’aise ?",
    "cat": "Focus",
    "orientation": "Détail"
  },
  {
    "text": "Vous sentez-vous rassuré(e) par des données précises ?",
    "cat": "Focus",
    "orientation": "Détail"
  },
  {
    "text": "Avez-vous besoin de calme pour vous ressourcer ?",
    "cat": "Énergie",
    "orientation": "Introverti"
  },
  {
    "text": "Préférez-vous les interactions en petit comité ?",
    "cat": "Énergie",
    "orientation": "Introverti"
  },
  {
    "text": "Le temps seul(e) est-il vital pour votre équilibre ?",
    "cat": "Énergie",
    "orientation": "Introverti"
  },
  {
    "text": "Trouvez-vous fatigantes les réunions sociales prolongées ?",
    "cat": "Énergie",
    "orientation": "Introverti"
  },
  {
    "text": "Vous sentez-vous plus vous-même dans l’intimité que dans un groupe ?",
    "cat": "Énergie",
    "orientation": "Introverti"
  },
  {
    "text": "Vous sentez-vous énergisé(e) par la présence des autres ?",
    "cat": "Énergie",
    "orientation": "Extraverti"
  },
  {
    "text": "Avez-vous tendance à parler pour réfléchir ?",
    "cat": "Énergie",
    "orientation": "Extraverti"
  },
  {
    "text": "Cherchez-vous la compagnie plutôt que la solitude ?",
    "cat": "Énergie",
    "orientation": "Extraverti"
  },
  {
    "text": "Les environnements dynamiques vous stimulent-ils ?",
    "cat": "Énergie",
    "orientation": "Extraverti"
  },
  {
    "text": "Préférez-vous partager vos pensées plutôt que les garder pour vous ?",
    "cat": "Énergie",
    "orientation": "Extraverti"
  }
];

// -------- COMPUTE --------
function computeResults(answers, questions) {
  const metaTotals = {
    "VAKOG": {}, "Procédure / Option": {}, "Proactif / Réactif": {}, "Rapport au temps": {}, "Motivation": {}, "Orientation": {}, "Énergie": {}, "Focus": {},
  };

  answers.forEach((ans, i) => {
    if (ans == null) return;
    const q = questions[i];
    const cat = q.cat;
    const orient = q.orientation;
    metaTotals[cat][orient] = (metaTotals[cat][orient] || 0) + ans;
  });

  const metaPercent = {};
  Object.keys(metaTotals).forEach(cat => {
    const pans = metaTotals[cat];
    const sumAll = Object.values(pans).reduce((s,v)=>s+v,0);
    metaPercent[cat] = {};
    Object.keys(pans).forEach(p => {
      metaPercent[cat][p] = sumAll === 0 ? 0 : Math.round((pans[p]/sumAll)*100);
    });
  });
  return { metaTotals, metaPercent };
}

// -------- RENDER --------
const quizBody = document.getElementById('quizBody');
const progressBar = document.getElementById('progressBar');
const btnNext = document.getElementById('btnNext');
const btnSend = document.getElementById('btnSend');

const QUESTIONS = BONUS_QUESTIONS.sort(() => Math.random()-0.5).slice(0,105);
let currentPage = 0;
const totalPages = Math.ceil(QUESTIONS.length / QUESTIONS_PER_PAGE);
const answers = new Array(QUESTIONS.length).fill(null);

function renderPage(pageIdx) {
  quizBody.innerHTML = '';
  const start = pageIdx * QUESTIONS_PER_PAGE;
  const end = Math.min(start + QUESTIONS_PER_PAGE, QUESTIONS.length);
  for (let i=start; i<end; i++) {
    const q = QUESTIONS[i];
    const qDiv = document.createElement('div');
    qDiv.className = 'question';
    qDiv.innerHTML = `<p><strong>Q${i+1}.</strong> ${q.text} <br><small>${q.cat} – ${q.orientation}</small></p>`;
    ['non','rarement','souvent','oui'].forEach(opt => {
      const id = `q${i}_${opt}`;
      const label = document.createElement('label');
      label.innerHTML = `<input type="radio" name="q${i}" id="${id}" value="${ANSWER_VALUES[opt]}"> ${opt}`;
      label.querySelector('input').addEventListener('change', e=>answers[i]=Number(e.target.value));
      qDiv.appendChild(label);
    });
    quizBody.appendChild(qDiv);
  }
  progressBar.style.width = `${Math.round(((pageIdx)/Math.max(1,totalPages-1))*100)}%`;
  btnNext.textContent = pageIdx===totalPages-1 ? "Vérifier & Envoyer" : "Suivant";
}

btnNext.addEventListener('click', () => {
  if (currentPage < totalPages-1) {
    currentPage++;
    renderPage(currentPage);
    return;
  }
  document.getElementById('quiz').hidden = true;
  document.getElementById('collectEmail').hidden = false;
});

btnSend.addEventListener('click', () => {
  const email = document.getElementById('email').value.trim();
  const consent = document.getElementById('consent').checked;
  if (!email || !consent) { alert("Veuillez renseigner votre e-mail et accepter la clause."); return; }

  const { metaTotals, metaPercent } = computeResults(answers, QUESTIONS);
  const segments = [];
  Object.keys(metaPercent).forEach(cat => {
    const pans = metaPercent[cat];
    const best = Object.keys(pans).reduce((a,b)=>pans[a]>=pans[b]?a:b);
    segments.push(`${cat}:${best}`);
  });

  const captchaToken = document.getElementById('g-recaptcha-response')?.value || '';
  const payload = {
    email,
    metaTotals,
    metaPercent,
    segments,
    bonus_id: "tome1",
    response: captchaToken,
    interpretation_text: generateInterpretation(metaPercent)
  };

  fetch(SUBMIT_URL, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload)
  }).then(r=>r.json()).then(data=>{
    if (data.status==="duplicate") {
      alert("⚠️ Cette adresse e-mail a déjà été utilisée.");
    } else if (data.status==="ok") {
      document.getElementById('collectEmail').hidden = true;
      document.getElementById('thanks').style.display = 'block';
      document.getElementById('toEmail').textContent = email;
    } else if (data.status==="captcha_failed") {
      alert("Captcha invalide. Merci de réessayer.");
    } else {
      alert("Envoi terminé. Vérifiez vos mails.");
    }
  }).catch(err=>{
    console.error("Erreur envoi :", err);
    alert("Impossible d’envoyer le formulaire.");
  });
});


function generateInterpretation(metaPercent) {
  let text = "";

  // Motivation
  if (metaPercent["Motivation"]) {
    const m = metaPercent["Motivation"];
    if (m["Pouvoir"] >= 50) {
      text += `Vous avancez avec une belle énergie de Pouvoir (${m["Pouvoir"]}%). Cela fait de vous un·e partenaire passionné·e, toujours prêt·e à prendre les devants. Avec un·e amoureux·se aussi Pouvoir, attendez-vous à des étincelles et parfois des orages. Mais aux côtés d’un·e Objectif ou Affiliation, votre force trouve un merveilleux équilibre.\n\n`;
    }
    if (m["Objectif"] >= 50) {
      text += `Votre motivation principale est tournée vers les Objectifs (${m["Objectif"]}%). Vous aimez avancer concrètement et atteindre vos buts. Avec un·e partenaire Pouvoir, la relation peut être stimulante mais parfois tendue. Avec un·e amoureux·se Affiliation, vous trouvez la douceur qui apaise vos élans de performance.\n\n`;
    }
    if (m["Affiliation"] >= 50) {
      text += `Votre cœur s’oriente avant tout vers l’Affiliation (${m["Affiliation"]}%). Vous cherchez l’harmonie, le lien et la complicité. Deux partenaires Affiliation créent un couple fusionnel et tendre, mais parfois trop dépendant. Avec un·e Pouvoir ou Objectif, vous trouvez l’ancrage et la structure qui renforcent votre douceur naturelle.\n\n`;
    }
  }

  // Proactif / Réactif
  if (metaPercent["Proactif / Réactif"]) {
    const m = metaPercent["Proactif / Réactif"];
    if (m["Proactif"] >= 50) {
      text += `Votre style est résolument Proactif (${m["Proactif"]}%). Vous aimez agir vite, décider et entraîner l’autre dans votre élan. Avec un·e partenaire aussi Proactif, la relation sera intense, parfois précipitée. Avec un·e Réactif, vous trouverez un bel équilibre entre action et réflexion.\n\n`;
    }
    if (m["Réactif"] >= 50) {
      text += `Votre style est plutôt Réactif (${m["Réactif"]}%). Vous aimez observer, comprendre, prendre le temps avant d’agir. Deux Réactifs créent une relation rassurante mais parfois trop lente. Avec un·e Proactif, vous gagnez en dynamisme et en mouvement.\n\n`;
    }
  }

  // Option / Procédure
  if (metaPercent["Procédure / Option"]) {
    const m = metaPercent["Procédure / Option"];
    if (m["Option"] >= 50) {
      text += `Vous avez une belle énergie Option (${m["Option"]}%). Vous aimez la liberté, explorer, multiplier les possibles. Deux partenaires Option partagent l’enthousiasme mais risquent parfois de manquer de stabilité. Avec un·e Procédure, vous trouvez l’ancrage nécessaire.\n\n`;
    }
    if (m["Procédure"] >= 50) {
      text += `Vous êtes plutôt Procédure (${m["Procédure"]}%). Vous aimez les repères clairs, les méthodes, l’ordre. Deux Procédure construisent une relation solide mais parfois trop rigide. Avec un·e Option, vous découvrez la souplesse et la créativité qui enrichissent votre cadre.\n\n`;
    }
  }

  // Rapport au temps
  if (metaPercent["Rapport au temps"]) {
    const m = metaPercent["Rapport au temps"];
    if (m["Passé"] >= 50) {
      text += `Votre regard est tourné vers le Passé (${m["Passé"]}%). Vous valorisez la mémoire, les expériences vécues. Avec un·e partenaire très Futur, vous risquez de ne pas toujours vous comprendre. Avec un·e amoureux·se Présent, vous trouvez un équilibre entre souvenir et instant.\n\n`;
    }
    if (m["Présent"] >= 50) {
      text += `Votre rapport au temps est ancré dans le Présent (${m["Présent"]}%). Vous aimez savourer l’instant et la spontanéité. Deux Présents partagent une intensité joyeuse mais parfois insouciante. Avec un·e Passé ou Futur, vous trouvez stabilité ou vision.\n\n`;
    }
    if (m["Futur"] >= 50) {
      text += `Votre énergie se projette vers le Futur (${m["Futur"]}%). Vous aimez planifier, rêver, avancer. Avec un·e partenaire très Passé, il peut y avoir des incompréhensions. Avec un·e amoureux·se Présent ou Futur, vous trouvez un terrain de complicité.\n\n`;
    }
  }

  // Énergie (Introverti / Extraverti)
  if (metaPercent["Énergie"]) {
    const m = metaPercent["Énergie"];
    if (m["Introverti"] >= 50) {
      text += `Votre énergie relationnelle est Introvertie (${m["Introverti"]}%). Deux Introvertis se comprennent à merveille, partageant le calme et l’intériorité. Avec un·e Extraverti très marqué, il faudra apprendre à célébrer vos différences plutôt que de les subir.\n\n`;
    }
    if (m["Extraverti"] >= 50) {
      text += `Votre énergie relationnelle est Extravertie (${m["Extraverti"]}%). Deux Extravertis partagent une complicité pétillante, pleine de mouvement et d’expression. Avec un·e Introverti très marqué, des tensions peuvent naître si chacun ne respecte pas le rythme de l’autre.\n\n`;
    }
  }

  return text.trim();
}


// INIT
renderPage(0);
</script>


<script>
function showPage(pageIndex) {
  const pages = document.querySelectorAll('.page');
  pages.forEach((page, i) => {
    if (i === pageIndex) {
      page.classList.add('active');
    } else {
      page.classList.remove('active');
    }
  });
  updateProgress(pageIndex + 1, pages.length);
}
</script>


<script>
function validatePage(pageIndex) {
  const page = document.querySelectorAll('.page')[pageIndex];
  const questions = page.querySelectorAll('.question');
  for (let q of questions) {
    const inputs = q.querySelectorAll('input[type="radio"]');
    const checked = Array.from(inputs).some(i => i.checked);
    if (!checked) {
      alert("💡 Merci de répondre à toutes les questions pour continuer, cela rendra votre profil plus précis ❤️");
      return false;
    }
  }
  return true;
}
function nextPage(currentPage) {
  if (!validatePage(currentPage)) return;
  showPage(currentPage + 1);
}
</script>

</body>
</html>
